<form
  [formGroup]="form"
  class="form"
  #settingsForm="ngForm"
  (ngSubmit)="onSubmit()"
  focusInvalidInput
>
  <div class="form__row">
    <label for="form-password" class="form__label">Current password</label>
    <input
      type="password"
      formControlName="password"
      pPassword
      class="form__input"
      id="form-password"
    />
  </div>
  <div class="form__row">
    <label for="form-new-password" class="form__label">New password</label>
    <input
      type="password"
      formControlName="newPassword"
      pPassword
      class="form__input"
      id="form-new-password"
    />

    @if (
      (newPasswordControl.invalid && newPasswordControl.dirty) ||
      (form.touched && form.invalid && settingsForm.submitted)
    ) {
      <small class="form__validation-error">
        @if (newPasswordControl.hasError("minlength")) {
          Password must contain at least 8 characters.
        }
        @if (newPasswordControl.hasError("maxlength")) {
          Password cannot contain more than 16 characters.
        }
      </small>
    }
  </div>

  @if (authErrors(); as error) {
    <small class="form__auth-error">
      @if (error.wrongPassword) {
        Wrong current password.
      }
    </small>
  }

  <p-button
    type="submit"
    severity="help"
    label="Save password"
    class="form__button"
    size="small"
    [loading]="loading"
  ></p-button>
</form>
